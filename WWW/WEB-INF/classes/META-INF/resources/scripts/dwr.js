if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}dwr.engine.setErrorHandler=function(a){dwr.engine._errorHandler=a};dwr.engine.setWarningHandler=function(a){dwr.engine._warningHandler=a};dwr.engine.setTextHtmlHandler=function(a){dwr.engine._textHtmlHandler=a};dwr.engine.setTimeout=function(a){dwr.engine._timeout=a};dwr.engine.setPreHook=function(a){dwr.engine._preHook=a};dwr.engine.setPostHook=function(a){dwr.engine._postHook=a};dwr.engine.setHeaders=function(a){dwr.engine._headers=a};dwr.engine.setParameters=function(a){dwr.engine._parameters=a};dwr.engine.XMLHttpRequest=1;dwr.engine.IFrame=2;dwr.engine.ScriptTag=3;dwr.engine.setRpcType=function(a){if(a!=dwr.engine.XMLHttpRequest&&a!=dwr.engine.IFrame&&a!=dwr.engine.ScriptTag){dwr.engine._handleError(null,{name:"dwr.engine.invalidRpcType",message:"RpcType must be one of dwr.engine.XMLHttpRequest or dwr.engine.IFrame or dwr.engine.ScriptTag"});return}dwr.engine._rpcType=a};dwr.engine.setHttpMethod=function(a){if(a!="GET"&&a!="POST"){dwr.engine._handleError(null,{name:"dwr.engine.invalidHttpMethod",message:"Remoting method must be one of GET or POST"});return}dwr.engine._httpMethod=a};dwr.engine.setOrdered=function(a){dwr.engine._ordered=a};dwr.engine.setAsync=function(a){dwr.engine._async=a};dwr.engine.setActiveReverseAjax=function(a){if(a){if(dwr.engine._activeReverseAjax){return}dwr.engine._activeReverseAjax=true;dwr.engine._poll()}else{if(dwr.engine._activeReverseAjax&&dwr.engine._pollReq){dwr.engine._pollReq.abort()}dwr.engine._activeReverseAjax=false}};dwr.engine.defaultErrorHandler=function(b,a){dwr.engine._debug("Error: "+a.name+", "+a.message,true);if(b==null||b==""){alert("A server error has occured.")}else{if(b.indexOf("0x80040111")!=-1){dwr.engine._debug(b)}else{alert(b)}}};dwr.engine.defaultWarningHandler=function(b,a){dwr.engine._debug(b)};dwr.engine.beginBatch=function(){if(dwr.engine._batch){dwr.engine._handleError(null,{name:"dwr.engine.batchBegun",message:"Batch already begun"});return}dwr.engine._batch=dwr.engine._createBatch()};dwr.engine.endBatch=function(b){var a=dwr.engine._batch;if(a==null){dwr.engine._handleError(null,{name:"dwr.engine.batchNotBegun",message:"No batch in progress"});return}dwr.engine._batch=null;if(a.map.callCount==0){return}if(b){dwr.engine._mergeBatch(a,b)}if(dwr.engine._ordered&&dwr.engine._batchesLength!=0){dwr.engine._batchQueue[dwr.engine._batchQueue.length]=a}else{dwr.engine._sendData(a)}};dwr.engine.setPollMethod=function(a){dwr.engine.setPollType(a)};dwr.engine.setMethod=function(a){dwr.engine.setRpcType(a)};dwr.engine.setVerb=function(a){dwr.engine.setHttpMethod(a)};dwr.engine.setPollType=function(){dwr.engine._debug("Manually setting the Poll Type is not supported")};dwr.engine._origScriptSessionId="E5E5E0326AFF3A11F1C85E256FC0A0AB";dwr.engine._sessionCookieName="JSESSIONID";dwr.engine._allowGetForSafariButMakeForgeryEasier="false";dwr.engine._scriptTagProtection="throw 'allowScriptTagRemoting is false.';";dwr.engine._defaultPath="/betterform/Flux";dwr.engine._pollWithXhr="false";dwr.engine._scriptSessionId=null;dwr.engine._getScriptSessionId=function(){if(dwr.engine._scriptSessionId==null){dwr.engine._scriptSessionId=dwr.engine._origScriptSessionId+Math.floor(Math.random()*1000)}return dwr.engine._scriptSessionId};dwr.engine._errorHandler=dwr.engine.defaultErrorHandler;dwr.engine._warningHandler=dwr.engine.defaultWarningHandler;dwr.engine._preHook=null;dwr.engine._postHook=null;dwr.engine._batches={};dwr.engine._batchesLength=0;dwr.engine._batchQueue=[];dwr.engine._rpcType=dwr.engine.XMLHttpRequest;dwr.engine._httpMethod="POST";dwr.engine._ordered=false;dwr.engine._async=true;dwr.engine._batch=null;dwr.engine._timeout=0;dwr.engine._DOMDocument=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];dwr.engine._XMLHTTP=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];dwr.engine._activeReverseAjax=false;dwr.engine._outstandingIFrames=[];dwr.engine._pollReq=null;dwr.engine._pollCometInterval=200;dwr.engine._pollRetries=0;dwr.engine._maxPollRetries=0;dwr.engine._textHtmlHandler=null;dwr.engine._headers=null;dwr.engine._parameters=null;dwr.engine._postSeperator="\n";dwr.engine._defaultInterceptor=function(a){return a};dwr.engine._urlRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._contentRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._replyRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._nextBatchId=0;dwr.engine._propnames=["rpcType","httpMethod","async","timeout","errorHandler","warningHandler","textHtmlHandler"];dwr.engine._partialResponseNo=0;dwr.engine._partialResponseYes=1;dwr.engine._partialResponseFlush=2;dwr.engine._unloading=false;dwr.engine._execute=function(l,b,j,h){var e=false;if(dwr.engine._batch==null){dwr.engine.beginBatch();e=true}var d=dwr.engine._batch;var g=[];for(var c=0;c<arguments.length-3;c++){g[c]=arguments[c+3]}if(d.path==null){d.path=l}else{if(d.path!=l){dwr.engine._handleError(d,{name:"dwr.engine.multipleServlets",message:"Can't batch requests to multiple DWR Servlets."});return}}var a;var k=g[g.length-1];if(typeof k=="function"||k==null){a={callback:g.pop()}}else{a=g.pop()}dwr.engine._mergeBatch(d,a);d.handlers[d.map.callCount]={exceptionHandler:a.exceptionHandler,callback:a.callback};var f="c"+d.map.callCount+"-";d.map[f+"scriptName"]=b;d.map[f+"methodName"]=j;d.map[f+"id"]=d.map.callCount;for(c=0;c<g.length;c++){dwr.engine._serializeAll(d,[],g[c],f+"param"+c)}d.map.callCount++;if(e){dwr.engine.endBatch()}};dwr.engine._poll=function(){if(!dwr.engine._activeReverseAjax){return}var a=dwr.engine._createBatch();a.map.id=0;a.map.callCount=1;a.isPoll=true;if(dwr.engine._pollWithXhr=="true"){a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseNo}else{if(navigator.userAgent.indexOf("Gecko/")!=-1){a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseYes}else{a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseNo}}a.httpMethod="POST";a.async=true;a.timeout=0;a.path=dwr.engine._defaultPath;a.preHooks=[];a.postHooks=[];a.errorHandler=dwr.engine._pollErrorHandler;a.warningHandler=dwr.engine._pollErrorHandler;a.handlers[0]={callback:function(b){dwr.engine._pollRetries=0;setTimeout(dwr.engine._poll,b)}};dwr.engine._sendData(a);if(a.rpcType==dwr.engine.XMLHttpRequest&&a.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._checkCometPoll()}};dwr.engine._pollErrorHandler=function(b,a){dwr.engine._pollRetries++;dwr.engine._debug("Reverse Ajax poll failed (pollRetries="+dwr.engine._pollRetries+"): "+a.name+" : "+a.message);if(dwr.engine._pollRetries<dwr.engine._maxPollRetries){setTimeout(dwr.engine._poll,10000)}else{dwr.engine._activeReverseAjax=false;dwr.engine._debug("Giving up.")}};dwr.engine._createBatch=function(){var a={map:{callCount:0,page:window.location.pathname+window.location.search,httpSessionId:dwr.engine._getJSessionId(),scriptSessionId:dwr.engine._getScriptSessionId()},charsProcessed:0,paramCount:0,parameters:{},headers:{},isPoll:false,handlers:{},preHooks:[],postHooks:[],rpcType:dwr.engine._rpcType,httpMethod:dwr.engine._httpMethod,async:dwr.engine._async,timeout:dwr.engine._timeout,errorHandler:dwr.engine._errorHandler,warningHandler:dwr.engine._warningHandler,textHtmlHandler:dwr.engine._textHtmlHandler};if(dwr.engine._preHook){a.preHooks.push(dwr.engine._preHook)}if(dwr.engine._postHook){a.postHooks.push(dwr.engine._postHook)}var c,b;if(dwr.engine._headers){for(c in dwr.engine._headers){b=dwr.engine._headers[c];if(typeof b!="function"){a.headers[c]=b}}}if(dwr.engine._parameters){for(c in dwr.engine._parameters){b=dwr.engine._parameters[c];if(typeof b!="function"){a.parameters[c]=b}}}return a};dwr.engine._mergeBatch=function(a,d){var e,c;for(var b=0;b<dwr.engine._propnames.length;b++){e=dwr.engine._propnames[b];if(d[e]!=null){a[e]=d[e]}}if(d.preHook!=null){a.preHooks.unshift(d.preHook)}if(d.postHook!=null){a.postHooks.push(d.postHook)}if(d.headers){for(e in d.headers){c=d.headers[e];if(typeof c!="function"){a.headers[e]=c}}}if(d.parameters){for(e in d.parameters){c=d.parameters[e];if(typeof c!="function"){a.map["p-"+e]=""+c}}}};dwr.engine._getJSessionId=function(){var c=document.cookie.split(";");for(var b=0;b<c.length;b++){var a=c[b];while(a.charAt(0)==" "){a=a.substring(1,a.length)}if(a.indexOf(dwr.engine._sessionCookieName+"=")==0){return a.substring(dwr.engine._sessionCookieName.length+1,a.length)}}return""};dwr.engine._checkCometPoll=function(){for(var b=0;b<dwr.engine._outstandingIFrames.length;b++){var e="";var c=dwr.engine._outstandingIFrames[b];try{e=dwr.engine._getTextFromCometIFrame(c)}catch(a){dwr.engine._handleWarning(c.batch,a)}if(e!=""){dwr.engine._processCometResponse(e,c.batch)}}if(dwr.engine._pollReq){var d=dwr.engine._pollReq;var e=d.responseText;if(e!=null){dwr.engine._processCometResponse(e,d.batch)}}if(dwr.engine._outstandingIFrames.length>0||dwr.engine._pollReq){setTimeout(dwr.engine._checkCometPoll,dwr.engine._pollCometInterval)}};dwr.engine._getTextFromCometIFrame=function(b){var a=b.contentWindow.document.body;if(a==null){return""}var c=a.innerHTML;if(c.indexOf("<PRE>")==0||c.indexOf("<pre>")==0){c=c.substring(5,c.length-7)}return c};dwr.engine._processCometResponse=function(d,e){if(e.charsProcessed==d.length){return}if(d.length==0){e.charsProcessed=0;return}var b=d.indexOf("//#DWR-START#",e.charsProcessed);if(b==-1){e.charsProcessed=d.length;return}var a=d.lastIndexOf("//#DWR-END#");if(a==-1){return}if(d.charCodeAt(a+11)==13&&d.charCodeAt(a+12)==10){e.charsProcessed=a+13}else{e.charsProcessed=a+11}var c=d.substring(b+13,a);dwr.engine._receivedBatch=e;dwr.engine._eval(c);dwr.engine._receivedBatch=null};dwr.engine._sendData=function(e){e.map.batchId=dwr.engine._nextBatchId;dwr.engine._nextBatchId++;dwr.engine._batches[e.map.batchId]=e;dwr.engine._batchesLength++;e.completed=false;for(var d=0;d<e.preHooks.length;d++){e.preHooks[d]()}e.preHooks=null;if(e.timeout&&e.timeout!=0){e.timeoutId=setTimeout(function(){dwr.engine._abortRequest(e)},e.timeout)}if(e.rpcType==dwr.engine.XMLHttpRequest){if(window.XMLHttpRequest){e.req=new XMLHttpRequest()}else{if(window.ActiveXObject&&!(navigator.userAgent.indexOf("Mac")>=0&&navigator.userAgent.indexOf("MSIE")>=0)){e.req=dwr.engine._newActiveXObject(dwr.engine._XMLHTTP)}}}var a,c;if(e.req){if(e.async){e.req.onreadystatechange=function(){if(typeof dwr!="undefined"){dwr.engine._stateChange(e)}}}if(e.isPoll){dwr.engine._pollReq=e.req;if(!(document.all&&!window.opera)){e.req.batch=e}}var b=navigator.userAgent.indexOf("Safari/");if(b>=0){var g=navigator.userAgent.substring(b+7);if(parseInt(g,10)<400){if(dwr.engine._allowGetForSafariButMakeForgeryEasier=="true"){e.httpMethod="GET"}else{dwr.engine._handleWarning(e,{name:"dwr.engine.oldSafari",message:"Safari GET support disabled. See getahead.org/dwr/server/servlet and allowGetForSafariButMakeForgeryEasier."})}}}e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;c=dwr.engine._constructRequest(e);try{e.req.open(e.httpMethod,c.url,e.async);try{for(a in e.headers){var j=e.headers[a];if(typeof j=="string"){e.req.setRequestHeader(a,j)}}if(!e.headers["Content-Type"]){e.req.setRequestHeader("Content-Type","text/plain")}}catch(h){dwr.engine._handleWarning(e,h)}e.req.send(c.body);if(!e.async){dwr.engine._stateChange(e)}}catch(h){dwr.engine._handleError(e,h)}}else{if(e.rpcType!=dwr.engine.ScriptTag){var f=e.isPoll?"dwr-if-poll-"+e.map.batchId:"dwr-if-"+e.map.batchId;e.div=document.createElement("div");document.body.appendChild(e.div);e.div.innerHTML="<iframe src='javascript:void(0)' frameborder='0' style='width:0px;height:0px;border:0;' id='"+f+"' name='"+f+"' onload='dwr.engine._iframeLoadingComplete ("+e.map.batchId+");'></iframe>";e.document=document;e.iframe=e.document.getElementById(f);e.iframe.batch=e;e.mode=e.isPoll?dwr.engine._ModeHtmlPoll:dwr.engine._ModeHtmlCall;if(e.isPoll){dwr.engine._outstandingIFrames.push(e.iframe)}c=dwr.engine._constructRequest(e);if(e.httpMethod=="GET"){e.iframe.setAttribute("src",c.url)}else{e.form=e.document.createElement("form");e.form.setAttribute("id","dwr-form");e.form.setAttribute("action",c.url);e.form.setAttribute("style","display:none;");e.form.setAttribute("target",f);e.form.target=f;e.form.setAttribute("method",e.httpMethod);for(a in e.map){var j=e.map[a];if(typeof j!="function"){var k=e.document.createElement("input");k.setAttribute("type","hidden");k.setAttribute("name",a);k.setAttribute("value",j);e.form.appendChild(k)}}e.document.body.appendChild(e.form);e.form.submit()}}else{e.httpMethod="GET";e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;c=dwr.engine._constructRequest(e);e.script=document.createElement("script");e.script.id="dwr-st-"+e.map["c0-id"];e.script.src=c.url;document.body.appendChild(e.script)}}};dwr.engine._ModePlainCall="/call/plaincall/";dwr.engine._ModeHtmlCall="/call/htmlcall/";dwr.engine._ModePlainPoll="/call/plainpoll/";dwr.engine._ModeHtmlPoll="/call/htmlpoll/";dwr.engine._constructRequest=function(b){var c={url:b.path+b.mode,body:null};if(b.isPoll==true){c.url+="ReverseAjax.dwr"}else{if(b.map.callCount==1){c.url+=b.map["c0-scriptName"]+"."+b.map["c0-methodName"]+".dwr"}else{c.url+="Multiple."+b.map.callCount+".dwr"}}var e=location.href.match(/jsessionid=([^?]+)/);if(e!=null){c.url+=";jsessionid="+e[1]}var d;if(b.httpMethod=="GET"){b.map.callCount=""+b.map.callCount;c.url+="?";for(d in b.map){if(typeof b.map[d]!="function"){c.url+=encodeURIComponent(d)+"="+encodeURIComponent(b.map[d])+"&"}}c.url=c.url.substring(0,c.url.length-1)}else{c.body="";if(document.all&&!window.opera){var a=[];for(d in b.map){if(typeof b.map[d]!="function"){a.push(d+"="+b.map[d]+dwr.engine._postSeperator)}}c.body=a.join("")}else{for(d in b.map){if(typeof b.map[d]!="function"){c.body+=d+"="+b.map[d]+dwr.engine._postSeperator}}}c.body=dwr.engine._contentRewriteHandler(c.body)}c.url=dwr.engine._urlRewriteHandler(c.url);return c};dwr.engine._stateChange=function(c){var b;if(c.completed){dwr.engine._debug("Error: _stateChange() with batch.completed");return}var f=c.req;try{if(f.readyState!=4){return}}catch(d){dwr.engine._handleWarning(c,d);dwr.engine._clearUp(c);return}if(dwr.engine._unloading){dwr.engine._debug("Ignoring reply from server as page is unloading.");return}try{var e=f.responseText;e=dwr.engine._replyRewriteHandler(e);var a=f.status;if(e==null||e==""){dwr.engine._handleWarning(c,{name:"dwr.engine.missingData",message:"No data received from server"})}else{if(a!=200){dwr.engine._handleError(c,{name:"dwr.engine.http."+a,message:f.statusText})}else{var g=f.getResponseHeader("Content-Type");if(!g.match(/^text\/plain/)&&!g.match(/^text\/javascript/)){if(g.match(/^text\/html/)&&typeof c.textHtmlHandler=="function"){c.textHtmlHandler({status:a,responseText:e,contentType:g})}else{dwr.engine._handleWarning(c,{name:"dwr.engine.invalidMimeType",message:"Invalid content type: '"+g+"'"})}}else{if(c.isPoll&&c.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._processCometResponse(e,c)}else{if(e.search("//#DWR")==-1){dwr.engine._handleWarning(c,{name:"dwr.engine.invalidReply",message:"Invalid reply from server"})}else{b=e}}}}}}catch(d){dwr.engine._handleWarning(c,d)}dwr.engine._callPostHooks(c);dwr.engine._receivedBatch=c;if(b!=null){b=b.replace(dwr.engine._scriptTagProtection,"")}dwr.engine._eval(b);dwr.engine._receivedBatch=null;dwr.engine._validateBatch(c);if(!c.completed){dwr.engine._clearUp(c)}};dwr.engine._validateBatch=function(a){if(!a.completed){for(var b=0;b<a.map.callCount;b++){if(a.handlers[b]!=null){dwr.engine._handleWarning(a,{name:"dwr.engine.incompleteReply",message:"Incomplete reply from server"});break}}}};dwr.engine._iframeLoadingComplete=function(a){var b=dwr.engine._batches[a];if(b){dwr.engine._validateBatch(b)}};dwr.engine._remoteHandleCallback=function(a,f,e){var c=dwr.engine._batches[a];if(c==null){dwr.engine._debug("Warning: batch == null in remoteHandleCallback for batchId="+a,true);return}try{var b=c.handlers[f];c.handlers[f]=null;if(!b){dwr.engine._debug("Warning: Missing handlers. callId="+f,true)}else{if(typeof b.callback=="function"){b.callback(e)}}}catch(d){dwr.engine._handleError(c,d)}};dwr.engine._remoteHandleException=function(a,e,d){var c=dwr.engine._batches[a];if(c==null){dwr.engine._debug("Warning: null batch in remoteHandleException",true);return}var b=c.handlers[e];c.handlers[e]=null;if(b==null){dwr.engine._debug("Warning: null handlers in remoteHandleException",true);return}if(d.message==undefined){d.message=""}if(typeof b.exceptionHandler=="function"){b.exceptionHandler(d.message,d)}else{if(typeof c.errorHandler=="function"){c.errorHandler(d.message,d)}}};dwr.engine._remoteHandleBatchException=function(c,a){var b=(dwr.engine._receivedBatch==null&&a!=null);if(b){dwr.engine._receivedBatch=dwr.engine._batches[a]}if(c.message==undefined){c.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,c);if(b){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[a])}};dwr.engine._remotePollCometDisabled=function(c,a){dwr.engine.setActiveReverseAjax(false);var b=(dwr.engine._receivedBatch==null&&a!=null);if(b){dwr.engine._receivedBatch=dwr.engine._batches[a]}if(c.message==undefined){c.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,c);if(b){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[a])}};dwr.engine._remoteBeginIFrameResponse=function(b,a){if(b!=null){dwr.engine._receivedBatch=b.batch}dwr.engine._callPostHooks(dwr.engine._receivedBatch)};dwr.engine._remoteEndIFrameResponse=function(a){dwr.engine._clearUp(dwr.engine._receivedBatch);dwr.engine._receivedBatch=null};dwr.engine._eval=function(script){if(script==null){return null}if(script==""){dwr.engine._debug("Warning: blank script",true);return null}return eval(script)};dwr.engine._abortRequest=function(a){if(a&&!a.completed){dwr.engine._clearUp(a);if(a.req){a.req.abort()}dwr.engine._handleError(a,{name:"dwr.engine.timeout",message:"Timeout"})}};dwr.engine._callPostHooks=function(a){if(a.postHooks){for(var b=0;b<a.postHooks.length;b++){a.postHooks[b]()}a.postHooks=null}};dwr.engine._clearUp=function(b){if(!b){dwr.engine._debug("Warning: null batch in dwr.engine._clearUp()",true);return}if(b.completed){dwr.engine._debug("Warning: Double complete",true);return}if(b.div){b.div.parentNode.removeChild(b.div)}if(b.iframe){for(var c=0;c<dwr.engine._outstandingIFrames.length;c++){if(dwr.engine._outstandingIFrames[c]==b.iframe){dwr.engine._outstandingIFrames.splice(c,1)}}b.iframe.parentNode.removeChild(b.iframe)}if(b.form){b.form.parentNode.removeChild(b.form)}if(b.req){if(b.req==dwr.engine._pollReq){dwr.engine._pollReq=null}delete b.req}if(b.timeoutId){clearTimeout(b.timeoutId);delete b.timeoutId}if(b.map&&(b.map.batchId||b.map.batchId==0)){delete dwr.engine._batches[b.map.batchId];dwr.engine._batchesLength--}b.completed=true;if(dwr.engine._batchQueue.length!=0){var a=dwr.engine._batchQueue.shift();dwr.engine._sendData(a)}};dwr.engine._unloader=function(){dwr.engine._unloading=true;dwr.engine._batchQueue.length=0;for(var a in dwr.engine._batches){var b=dwr.engine._batches[a];if(b&&b.map){if(b.req){b.req.abort()}dwr.engine._clearUp(b)}}};if(window.addEventListener){window.addEventListener("unload",dwr.engine._unloader,false)}else{if(window.attachEvent){window.attachEvent("onunload",dwr.engine._unloader)}}dwr.engine._handleError=function(a,b){if(typeof b=="string"){b={name:"unknown",message:b}}if(b.message==null){b.message=""}if(b.name==null){b.name="unknown"}if(a&&typeof a.errorHandler=="function"){a.errorHandler(b.message,b)}else{if(dwr.engine._errorHandler){dwr.engine._errorHandler(b.message,b)}}if(a){dwr.engine._clearUp(a)}};dwr.engine._handleWarning=function(a,b){if(typeof b=="string"){b={name:"unknown",message:b}}if(b.message==null){b.message=""}if(b.name==null){b.name="unknown"}if(a&&typeof a.warningHandler=="function"){a.warningHandler(b.message,b)}else{if(dwr.engine._warningHandler){dwr.engine._warningHandler(b.message,b)}}if(a){dwr.engine._clearUp(a)}};dwr.engine._serializeAll=function(b,d,c,a){if(c==null){b.map[a]="null:null";return}switch(typeof c){case"boolean":b.map[a]="boolean:"+c;break;case"number":b.map[a]="number:"+c;break;case"string":b.map[a]="string:"+encodeURIComponent(c);break;case"object":if(c instanceof String){b.map[a]="String:"+encodeURIComponent(c)}else{if(c instanceof Boolean){b.map[a]="Boolean:"+c}else{if(c instanceof Number){b.map[a]="Number:"+c}else{if(c instanceof Date){b.map[a]="Date:"+c.getTime()}else{if(c&&c.join){b.map[a]=dwr.engine._serializeArray(b,d,c,a)}else{b.map[a]=dwr.engine._serializeObject(b,d,c,a)}}}}}break;case"function":break;default:dwr.engine._handleWarning(null,{name:"dwr.engine.unexpectedType",message:"Unexpected type: "+typeof c+", attempting default converter."});b.map[a]="default:"+c;break}};dwr.engine._lookup=function(e,c,a){var d;for(var b=0;b<e.length;b++){if(e[b].data==c){d=e[b];break}}if(d){return"reference:"+d.name}e.push({data:c,name:a});return null};dwr.engine._serializeObject=function(c,h,g,b){var f=dwr.engine._lookup(h,g,b);if(f){return f}if(g.nodeName&&g.nodeType){return dwr.engine._serializeXml(c,h,g,b)}var e="Object_"+dwr.engine._getObjectClassName(g)+":{";var d;for(d in g){if(typeof g[d]!="function"){c.paramCount++;var a="c"+dwr.engine._batch.map.callCount+"-e"+c.paramCount;dwr.engine._serializeAll(c,h,g[d],a);e+=encodeURIComponent(d)+":reference:"+a+", "}}if(e.substring(e.length-2)==", "){e=e.substring(0,e.length-2)}e+="}";return e};dwr.engine._errorClasses={Error:Error,EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};dwr.engine._getObjectClassName=function(c){if(c&&c.constructor&&c.constructor.toString){var d=c.constructor.toString();var a=d.match(/function\s+(\w+)/);if(a&&a.length==2){return a[1]}}if(c&&c.constructor){for(var b in dwr.engine._errorClasses){if(c.constructor==dwr.engine._errorClasses[b]){return b}}}if(c){var d=Object.prototype.toString.call(c);var a=d.match(/\[object\s+(\w+)/);if(a&&a.length==2){return a[1]}}return"Object"};dwr.engine._serializeXml=function(c,f,e,b){var d=dwr.engine._lookup(f,e,b);if(d){return d}var a;if(window.XMLSerializer){a=new XMLSerializer().serializeToString(e)}else{if(e.toXml){a=e.toXml}else{a=e.innerHTML}}return"XML:"+encodeURIComponent(a)};dwr.engine._serializeArray=function(h,c,f,a){var d=dwr.engine._lookup(c,f,a);if(d){return d}if(document.all&&!window.opera){var b=["Array:["];for(var g=0;g<f.length;g++){if(g!=0){b.push(",")}h.paramCount++;var j="c"+dwr.engine._batch.map.callCount+"-e"+h.paramCount;dwr.engine._serializeAll(h,c,f[g],j);b.push("reference:");b.push(j)}b.push("]");e=b.join("")}else{var e="Array:[";for(var g=0;g<f.length;g++){if(g!=0){e+=","}h.paramCount++;var j="c"+dwr.engine._batch.map.callCount+"-e"+h.paramCount;dwr.engine._serializeAll(h,c,f[g],j);e+="reference:";e+=j}e+="]"}return e};dwr.engine._unserializeDocument=function(a){var c;if(window.DOMParser){var e=new DOMParser();c=e.parseFromString(a,"text/xml");if(!c.documentElement||c.documentElement.tagName=="parsererror"){var b=c.documentElement.firstChild.data;b+="\n"+c.documentElement.firstChild.nextSibling.firstChild.data;throw b}return c}else{if(window.ActiveXObject){c=dwr.engine._newActiveXObject(dwr.engine._DOMDocument);c.loadXML(a);return c}else{var d=document.createElement("div");d.innerHTML=a;return d}}};dwr.engine._newActiveXObject=function(a){var d;for(var c=0;c<a.length;c++){try{d=new ActiveXObject(a[c]);break}catch(b){}}return d};dwr.engine._debug=function(f,d){var a=false;try{if(window.console){if(d&&window.console.trace){window.console.trace()}window.console.log(f);a=true}else{if(window.opera&&window.opera.postError){window.opera.postError(f);a=true}}}catch(c){}if(!a){var b=document.getElementById("dwr-debug");if(b){var e=f+"<br/>"+b.innerHTML;if(e.length>2048){e=e.substring(0,2048)}b.innerHTML=e}}};if(Flux==null){var Flux={}}Flux._path="/betterform/Flux";Flux.init=function(b,a){dwr.engine._execute(Flux._path,"Flux","init",b,a)};Flux.close=function(b,a){dwr.engine._execute(Flux._path,"Flux","close",b,a)};Flux.setLocale=function(c,a,b){dwr.engine._execute(Flux._path,"Flux","setLocale",c,a,b)};Flux.getInstanceDocument=function(d,b,a,c){dwr.engine._execute(Flux._path,"Flux","getInstanceDocument",d,b,a,c)};Flux.dispatchEvent=function(c,a,b){dwr.engine._execute(Flux._path,"Flux","dispatchEvent",c,a,b)};Flux.setRepeatIndex=function(d,b,a,c){dwr.engine._execute(Flux._path,"Flux","setRepeatIndex",d,b,a,c)};Flux.dispatchEventType=function(d,b,a,c){dwr.engine._execute(Flux._path,"Flux","dispatchEventType",d,b,a,c)};Flux.dispatchEventTypeWithContext=function(e,c,b,a,d){dwr.engine._execute(Flux._path,"Flux","dispatchEventTypeWithContext",e,c,b,a,d)};Flux.setUIControlValue=function(d,b,a,c){dwr.engine._execute(Flux._path,"Flux","setUIControlValue",d,b,a,c)};Flux.setXFormsValue=function(d,b,a,c){dwr.engine._execute(Flux._path,"Flux","setXFormsValue",d,b,a,c)};Flux.getXFormsDOM=function(b,a){dwr.engine._execute(Flux._path,"Flux","getXFormsDOM",b,a)};Flux.fetchProgress=function(d,b,a,c){dwr.engine._execute(Flux._path,"Flux","fetchProgress",d,b,a,c)};if(XFormsModelElement==null){var XFormsModelElement={}}XFormsModelElement._path="/betterform/Flux";XFormsModelElement.refresh=function(c,a,b){dwr.engine._execute(XFormsModelElement._path,"XFormsModelElement","refresh",c,a,b)};XFormsModelElement.revalidate=function(c,a,b){dwr.engine._execute(XFormsModelElement._path,"XFormsModelElement","revalidate",c,a,b)};XFormsModelElement.getInstanceDocument=function(d,b,a,c){dwr.engine._execute(XFormsModelElement._path,"XFormsModelElement","getInstanceDocument",d,b,a,c)};XFormsModelElement.rebuild=function(c,a,b){dwr.engine._execute(XFormsModelElement._path,"XFormsModelElement","rebuild",c,a,b)};XFormsModelElement.recalculate=function(c,a,b){dwr.engine._execute(XFormsModelElement._path,"XFormsModelElement","recalculate",c,a,b)};XFormsModelElement.getInstanceAsString=function(d,b,a,c){dwr.engine._execute(XFormsModelElement._path,"XFormsModelElement","getInstanceAsString",d,b,a,c)};if(dwr==null){var dwr={}}if(dwr.util==null){dwr.util={}}if(DWRUtil==null){var DWRUtil=dwr.util}dwr.util._escapeHtml=true;dwr.util.setEscapeHtml=function(a){dwr.util._escapeHtml=a};dwr.util._shouldEscapeHtml=function(a){if(a&&a.escapeHtml!=null){return a.escapeHtml}return dwr.util._escapeHtml};dwr.util.escapeHtml=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};dwr.util.unescapeHtml=function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")};dwr.util.replaceXmlCharacters=function(a){a=a.replace("&","+");a=a.replace("<","\u2039");a=a.replace(">","\u203A");a=a.replace("'","\u2018");a=a.replace('"',"\u201C");return a};dwr.util.containsXssRiskyCharacters=function(a){return(a.indexOf("&")!=-1||a.indexOf("<")!=-1||a.indexOf(">")!=-1||a.indexOf("'")!=-1||a.indexOf('"')!=-1)};dwr.util.onReturn=function(a,b){if(!a){a=window.event}if(a&&a.keyCode&&a.keyCode==13){b()}};dwr.util.selectRange=function(c,d,a){c=dwr.util._getElementById(c,"selectRange()");if(c==null){return}if(c.setSelectionRange){c.setSelectionRange(d,a)}else{if(c.createTextRange){var b=c.createTextRange();b.moveStart("character",d);b.moveEnd("character",a-c.value.length);b.select()}}c.focus()};if(document.getElementById){dwr.util.byId=function(){var c=new Array();for(var b=0;b<arguments.length;b++){var a=arguments[b];if(typeof a=="string"){a=document.getElementById(a)}if(arguments.length==1){return a}c.push(a)}return c}}else{if(document.all){dwr.util.byId=function(){var c=new Array();for(var b=0;b<arguments.length;b++){var a=arguments[b];if(typeof a=="string"){a=document.all[a]}if(arguments.length==1){return a}c.push(a)}return c}}}var $;if(!$){$=dwr.util.byId}dwr.util.toDescriptiveString=function(f,a,i){if(a===undefined){a=1}var c={};if(dwr.util._isObject(i)){c=i}var g={escapeHtml:false,baseIndent:"",childIndent:"\u00A0\u00A0",lineTerminator:"\n",oneLineMaxItems:5,shortStringMaxLength:13,propertyNameMaxLength:30};for(var b in g){if(!(b in c)){c[b]=g[b]}}var h={document:true,ownerDocument:true,all:true,parentElement:true,parentNode:true,offsetParent:true,children:true,firstChild:true,lastChild:true,previousSibling:true,nextSibling:true,innerHTML:true,outerHTML:true,innerText:true,outerText:true,textContent:true,attributes:true,style:true,currentStyle:true,runtimeStyle:true,parentTextEdit:true};function e(p,j,l,w){var m="";try{if(typeof p=="string"){var s=p;if(j==0&&s.length>w.shortStringMaxLength){s=s.substring(0,w.shortStringMaxLength-3)+"..."}if(w.escapeHtml){var x=s.split("\n");for(var q=0;q<x.length;q++){x[q]=dwr.util.escapeHtml(x[q])}s=x.join("\n")}if(j==0){s=s.replace(/\n|\r|\t/g,function(y){switch(y){case"\n":return"\\n";case"\r":return"";case"\t":return"\\t"}})}else{s=s.replace(/\n|\r|\t/g,function(y){switch(y){case"\n":return w.lineTerminator+d(l+1,w);case"\r":return"";case"\t":return"\\t"}})}m='"'+s+'"'}else{if(typeof p=="function"){m="function"}else{if(dwr.util._isArray(p)){if(j==0){if(p.length>0){m="[...]"}else{m="[]"}}else{var v=[];v.push("[");var r=0;for(var q=0;q<p.length;q++){if(!(q in p)){continue}var t=p[q];if(r>0){v.push(", ")}if(j==1){if(r==w.oneLineMaxItems){v.push("...");break}}else{v.push(w.lineTerminator+d(l+1,w))}if(q!=r){v.push(q);v.push(":")}v.push(e(t,j-1,l+1,w));r++}if(j>1){v.push(w.lineTerminator+d(l,w))}v.push("]");m=v.join("")}}else{if(dwr.util._isObject(p)&&!dwr.util._isDate(p)){if(j==0){m=dwr.util._detailedTypeOf(p)}else{var v=[];if(dwr.util._detailedTypeOf(p)!="Object"){v.push(dwr.util._detailedTypeOf(p));if(typeof p.valueOf()!="object"){v.push(":");v.push(e(p.valueOf(),1,l,w))}v.push(" ")}v.push("{");var u=dwr.util._isHTMLElement(p);var r=0;for(var k in p){var o=p[k];if(u){if(!o){continue}if(typeof o=="function"){continue}if(h[k]){continue}if(k.toUpperCase()==k){continue}}if(r>0){v.push(", ")}if(j==1){if(r==w.oneLineMaxItems){v.push("...");break}}else{v.push(w.lineTerminator+d(l+1,w))}v.push(k.length>w.propertyNameMaxLength?k.substring(0,w.propertyNameMaxLength-3)+"...":k);v.push(":");v.push(e(o,j-1,l+1,w));r++}if(j>1&&r>0){v.push(w.lineTerminator+d(l,w))}v.push("}");m=v.join("")}}else{m=""+p}}}}return m}catch(n){return(n.message?n.message:""+n)}}function d(l,j){var m=[];m.push(j.baseIndent);for(var k=0;k<l;k++){m.push(j.childIndent)}return m.join("")}return e(f,a,0,c)};dwr.util.useLoadingMessage=function(a){var b;if(a){b=a}else{b="Loading"}dwr.engine.setPreHook(function(){var d=dwr.util.byId("disabledZone");if(!d){d=document.createElement("div");d.setAttribute("id","disabledZone");d.style.position="absolute";d.style.zIndex="1000";d.style.left="0px";d.style.top="0px";d.style.width="100%";d.style.height="100%";document.body.appendChild(d);var c=document.createElement("div");c.setAttribute("id","messageZone");c.style.position="absolute";c.style.top="0px";c.style.right="0px";c.style.background="red";c.style.color="white";c.style.fontFamily="Arial,Helvetica,sans-serif";c.style.padding="4px";d.appendChild(c);var e=document.createTextNode(b);c.appendChild(e);dwr.util._disabledZoneUseCount=1}else{dwr.util.byId("messageZone").innerHTML=b;d.style.visibility="visible";dwr.util._disabledZoneUseCount++}});dwr.engine.setPostHook(function(){dwr.util._disabledZoneUseCount--;if(dwr.util._disabledZoneUseCount==0){dwr.util.byId("disabledZone").style.visibility="hidden"}})};dwr.util.setHighlightHandler=function(a){dwr.util._highlightHandler=a};dwr.util.yellowFadeHighlightHandler=function(a){dwr.util._yellowFadeProcess(a,0)};dwr.util._yellowFadeSteps=["d0","b0","a0","90","98","a0","a8","b0","b8","c0","c8","d0","d8","e0","e8","f0","f8"];dwr.util._yellowFadeProcess=function(a,b){a=dwr.util.byId(a);if(b<dwr.util._yellowFadeSteps.length){a.style.backgroundColor="#ffff"+dwr.util._yellowFadeSteps[b];setTimeout("dwr.util._yellowFadeProcess('"+a.id+"',"+(b+1)+")",200)}else{a.style.backgroundColor="transparent"}};dwr.util.borderFadeHighlightHandler=function(a){a.style.borderWidth="2px";a.style.borderStyle="solid";dwr.util._borderFadeProcess(a,0)};dwr.util._borderFadeSteps=["d0","b0","a0","90","98","a0","a8","b0","b8","c0","c8","d0","d8","e0","e8","f0","f8"];dwr.util._borderFadeProcess=function(a,b){a=dwr.util.byId(a);if(b<dwr.util._borderFadeSteps.length){a.style.borderColor="#ff"+dwr.util._borderFadeSteps[b]+dwr.util._borderFadeSteps[b];setTimeout("dwr.util._borderFadeProcess('"+a.id+"',"+(b+1)+")",200)}else{a.style.backgroundColor="transparent"}};dwr.util.focusHighlightHandler=function(b){try{b.focus()}catch(a){}};dwr.util._highlightHandler=null;dwr.util.highlight=function(b,a){if(a&&a.highlightHandler){a.highlightHandler(dwr.util.byId(b))}else{if(dwr.util._highlightHandler!=null){dwr.util._highlightHandler(dwr.util.byId(b))}}};dwr.util.setValue=function(f,g,c){if(g==null){g=""}if(c==null){c={}}var h=f;if(typeof f=="string"){f=dwr.util.byId(f);if(f&&f.id!=h){f=null}}var a=null;if(f==null){a=document.getElementsByName(h);if(a.length>=1){f=a.item(0)}}if(f==null){dwr.util._debug("setValue() can't find an element with id/name: "+h+".");return}dwr.util.highlight(f,c);if(dwr.util._isHTMLElement(f,"select")){if(f.type=="select-multiple"&&dwr.util._isArray(g)){dwr.util._selectListItems(f,g)}else{dwr.util._selectListItem(f,g)}return}if(dwr.util._isHTMLElement(f,"input")){if(f.type=="radio"||f.type=="checkbox"){if(a&&a.length>=1){for(var d=0;d<a.length;d++){var e=a.item(d);if(e.type!=f.type){continue}if(dwr.util._isArray(g)){e.checked=false;for(var b=0;b<g.length;b++){if(g[b]==e.value){e.checked=true}}}else{e.checked=(e.value==g)}}}else{f.checked=(g==true)}}else{f.value=g}return}if(dwr.util._isHTMLElement(f,"textarea")){f.value=g;return}if(g.nodeType){if(g.nodeType==9){g=g.documentElement}g=dwr.util._importNode(f.ownerDocument,g,true);f.appendChild(g);return}if(dwr.util._shouldEscapeHtml(c)&&typeof(g)=="string"){if(f.textContent){f.textContent=g}else{if(f.innerText){f.innerText=g}else{f.innerHTML=dwr.util.escapeHtml(g)}}}else{f.innerHTML=g}};dwr.util._selectListItems=function(d,e){var c=false;var b;var a;for(b=0;b<d.options.length;b++){d.options[b].selected=false;for(a=0;a<e.length;a++){if(d.options[b].value==e[a]){d.options[b].selected=true}}}if(c){return}for(b=0;b<d.options.length;b++){for(a=0;a<e.length;a++){if(d.options[b].text==e[a]){d.options[b].selected=true}}}};dwr.util._selectListItem=function(c,d){var b=false;var a;for(a=0;a<c.options.length;a++){if(c.options[a].value==d){c.options[a].selected=true;b=true}else{c.options[a].selected=false}}if(b){return}for(a=0;a<c.options.length;a++){c.options[a].selected=(c.options[a].text==d)}};dwr.util.getValue=function(j,k){if(k==null){k={}}var g=j;if(typeof j=="string"){j=dwr.util.byId(j);if(j&&j.id!=g){j=null}}var a=null;if(j==null){a=document.getElementsByName(g);if(a.length>=1){j=a.item(0)}}if(j==null){dwr.util._debug("getValue() can't find an element with id/name: "+g+".");return""}if(dwr.util._isHTMLElement(j,"select")){if(j.type=="select-multiple"){var d=new Array();for(var f=0;f<j.options.length;f++){var h=j.options[f];if(h.selected){var e=h.getAttributeNode("value");if(e&&e.specified){d.push(h.value)}else{d.push(h.text)}}}return d}else{var b=j.selectedIndex;if(b!=-1){var h=j.options[b];var e=h.getAttributeNode("value");if(e&&e.specified){return h.value}return h.text}else{return""}}}if(dwr.util._isHTMLElement(j,"input")){if(j.type=="radio"){if(a&&a.length>=1){for(var f=0;f<a.length;f++){var c=a.item(f);if(c.type==j.type){if(c.checked){return c.value}}}}return j.checked}if(j.type=="checkbox"){if(a&&a.length>=1){var d=[];for(var f=0;f<a.length;f++){var c=a.item(f);if(c.type==j.type){if(c.checked){d.push(c.value)}}}return d}return j.checked}return j.value}if(dwr.util._isHTMLElement(j,"textarea")){return j.value}if(dwr.util._shouldEscapeHtml(k)){if(j.textContent){return j.textContent}else{if(j.innerText){return j.innerText}}}return j.innerHTML};dwr.util.getText=function(b){b=dwr.util._getElementById(b,"getText()");if(b==null){return null}if(!dwr.util._isHTMLElement(b,"select")){dwr.util._debug("getText() can only be used with select elements. Attempt to use: "+dwr.util._detailedTypeOf(b)+" from  id: "+orig+".");return""}var a=b.selectedIndex;if(a!=-1){return b.options[a].text}else{return""}};dwr.util.setValues=function(c,a){var b="";if(a&&a.prefix){b=a.prefix}if(a&&a.idPrefix){b=a.idPrefix}dwr.util._setValuesRecursive(c,b)};dwr.util._setValuesRecursive=function(c,e){if(dwr.util._isArray(c)&&c.length>0&&dwr.util._isObject(c[0])){for(var b=0;b<c.length;b++){dwr.util._setValuesRecursive(c[b],e+"["+b+"]")}}else{if(dwr.util._isObject(c)&&!dwr.util._isArray(c)){for(var d in c){var a=e?e+"."+d:d;if(dwr.util._isObject(c[d])&&!dwr.util._isArray(c[d])||dwr.util._isArray(c[d])&&c[d].length>0&&dwr.util._isObject(c[d][0])){dwr.util._setValuesRecursive(c[d],a)}else{if(typeof c[d]=="function"){}else{if(dwr.util.byId(a)!=null||document.getElementsByName(a).length>=1){dwr.util.setValue(a,c[d])}}}}}}};dwr.util.getValues=function(c,a){if(typeof c=="string"||dwr.util._isHTMLElement(c)){return dwr.util.getFormValues(c)}else{var b="";if(a!=null&&a.prefix){b=a.prefix}if(a!=null&&a.idPrefix){b=a.idPrefix}dwr.util._getValuesRecursive(c,b);return c}};dwr.util.getFormValues=function(a){var f=null;if(typeof a=="string"){f=document.forms[a];if(f==null){f=dwr.util.byId(a)}}else{if(dwr.util._isHTMLElement(a)){f=a}}if(f!=null){if(f.elements==null){alert("getFormValues() requires an object or reference to a form element.");return null}var d={};var b;var e;for(var c=0;c<f.elements.length;c++){if(f[c].type in {button:0,submit:0,reset:0,image:0,file:0}){continue}if(f[c].name){b=f[c].name;e=dwr.util.getValue(b)}else{if(f[c].id){b=f[c].id}else{b="element"+c}e=dwr.util.getValue(f[c])}d[b]=e}return d}};dwr.util._getValuesRecursive=function(c,e){if(dwr.util._isArray(c)&&c.length>0&&dwr.util._isObject(c[0])){for(var b=0;b<c.length;b++){dwr.util._getValuesRecursive(c[b],e+"["+b+"]")}}else{if(dwr.util._isObject(c)&&!dwr.util._isArray(c)){for(var d in c){var a=e?e+"."+d:d;if(dwr.util._isObject(c[d])&&!dwr.util._isArray(c[d])||dwr.util._isArray(c[d])&&c[d].length>0&&dwr.util._isObject(c[d][0])){dwr.util._getValuesRecursive(c[d],a)}else{if(typeof c[d]=="function"){}else{if(dwr.util.byId(a)!=null||document.getElementsByName(a).length>=1){c[d]=dwr.util.getValue(a)}}}}}}};dwr.util.addOptions=function(o,f){o=dwr.util._getElementById(o,"addOptions()");if(o==null){return}var c=dwr.util._isHTMLElement(o,"select");var j=dwr.util._isHTMLElement(o,["ul","ol"]);if(!c&&!j){dwr.util._debug("addOptions() can only be used with select/ul/ol elements. Attempt to use: "+dwr.util._detailedTypeOf(o));return}if(f==null){return}var h=arguments.length;var p={};var n=arguments[h-1];if(h>2&&dwr.util._isObject(n)){p=n;h--}var g=null;if(h>=3){g=arguments[2]}var d=null;if(h>=4){d=arguments[3]}if(!p.optionCreator&&c){p.optionCreator=dwr.util._defaultOptionCreator}if(!p.optionCreator&&j){p.optionCreator=dwr.util._defaultListItemCreator}var m,k,l;if(dwr.util._isArray(f)){for(var e=0;e<f.length;e++){p.data=f[e];p.text=null;p.value=null;if(c){if(g!=null){if(d!=null){p.text=dwr.util._getValueFrom(f[e],d);p.value=dwr.util._getValueFrom(f[e],g)}else{p.text=p.value=dwr.util._getValueFrom(f[e],g)}}else{p.text=p.value=dwr.util._getValueFrom(f[e])}if(p.text!=null||p.value){var b=p.optionCreator(p);b.text=p.text;b.value=p.value;o.options[o.options.length]=b}}else{p.value=dwr.util._getValueFrom(f[e],g);if(p.value!=null){l=p.optionCreator(p);if(dwr.util._shouldEscapeHtml(p)){p.value=dwr.util.escapeHtml(p.value)}l.innerHTML=p.value;o.appendChild(l)}}}}else{if(d!=null){if(!c){alert("dwr.util.addOptions can only create select lists from objects.");return}for(var a in f){p.data=f[a];p.value=dwr.util._getValueFrom(f[a],g);p.text=dwr.util._getValueFrom(f[a],d);if(p.text!=null||p.value){var b=p.optionCreator(p);b.text=p.text;b.value=p.value;o.options[o.options.length]=b}}}else{if(!c){dwr.util._debug("dwr.util.addOptions can only create select lists from objects.");return}for(var a in f){if(typeof f[a]=="function"){continue}p.data=f[a];if(!g){p.value=a;p.text=f[a]}else{p.value=f[a];p.text=a}if(p.text!=null||p.value){var b=p.optionCreator(p);b.text=p.text;b.value=p.value;o.options[o.options.length]=b}}}}dwr.util.highlight(o,p)};dwr.util._getValueFrom=function(a,b){if(b==null){return a}else{if(typeof b=="function"){return b(a)}else{return a[b]}}};dwr.util._defaultOptionCreator=function(a){return new Option()};dwr.util._defaultListItemCreator=function(a){return document.createElement("li")};dwr.util.removeAllOptions=function(b){b=dwr.util._getElementById(b,"removeAllOptions()");if(b==null){return}var a=dwr.util._isHTMLElement(b,"select");var c=dwr.util._isHTMLElement(b,["ul","ol"]);if(!a&&!c){dwr.util._debug("removeAllOptions() can only be used with select, ol and ul elements. Attempt to use: "+dwr.util._detailedTypeOf(b));return}if(a){b.options.length=0}else{while(b.childNodes.length>0){b.removeChild(b.firstChild)}}};dwr.util.addRows=function(e,d,a,b){e=dwr.util._getElementById(e,"addRows()");if(e==null){return}if(!dwr.util._isHTMLElement(e,["table","tbody","thead","tfoot"])){dwr.util._debug("addRows() can only be used with table, tbody, thead and tfoot elements. Attempt to use: "+dwr.util._detailedTypeOf(e));return}if(!b){b={}}if(!b.rowCreator){b.rowCreator=dwr.util._defaultRowCreator}if(!b.cellCreator){b.cellCreator=dwr.util._defaultCellCreator}var c,f;if(dwr.util._isArray(d)){for(f=0;f<d.length;f++){b.rowData=d[f];b.rowIndex=f;b.rowNum=f;b.data=null;b.cellNum=-1;c=dwr.util._addRowInner(a,b);if(c!=null){e.appendChild(c)}}}else{if(typeof d=="object"){f=0;for(var g in d){b.rowData=d[g];b.rowIndex=g;b.rowNum=f;b.data=null;b.cellNum=-1;c=dwr.util._addRowInner(a,b);if(c!=null){e.appendChild(c)}f++}}}dwr.util.highlight(e,b)};dwr.util._addRowInner=function(a,b){var d=b.rowCreator(b);if(d==null){return null}for(var e=0;e<a.length;e++){var c=a[e];if(typeof c=="function"){b.data=c(b.rowData,b)}else{b.data=c||""}b.cellNum=e;var f=b.cellCreator(b);if(f!=null){if(b.data!=null){if(dwr.util._isHTMLElement(b.data)){f.appendChild(b.data)}else{if(dwr.util._shouldEscapeHtml(b)&&typeof(b.data)=="string"){f.innerHTML=dwr.util.escapeHtml(b.data)}else{f.innerHTML=b.data}}}d.appendChild(f)}}return d};dwr.util._defaultRowCreator=function(a){return document.createElement("tr")};dwr.util._defaultCellCreator=function(a){return document.createElement("td")};dwr.util.removeAllRows=function(c,a){c=dwr.util._getElementById(c,"removeAllRows()");if(c==null){return}if(!a){a={}}if(!a.filter){a.filter=function(){return true}}if(!dwr.util._isHTMLElement(c,["table","tbody","thead","tfoot"])){dwr.util._debug("removeAllRows() can only be used with table, tbody, thead and tfoot elements. Attempt to use: "+dwr.util._detailedTypeOf(c));return}var d=c.firstChild;var b;while(d!=null){b=d.nextSibling;if(a.filter(d)){c.removeChild(d)}d=b}};dwr.util.setClassName=function(b,a){b=dwr.util._getElementById(b,"setClassName()");if(b==null){return}b.className=a};dwr.util.addClassName=function(b,a){b=dwr.util._getElementById(b,"addClassName()");if(b==null){return}b.className+=" "+a};dwr.util.removeClassName=function(c,a){c=dwr.util._getElementById(c,"removeClassName()");if(c==null){return}var b=new RegExp("(^|\\s)"+a+"(\\s|$)","g");c.className=c.className.replace(b,"")};dwr.util.toggleClassName=function(c,a){c=dwr.util._getElementById(c,"toggleClassName()");if(c==null){return}var b=new RegExp("(^|\\s)"+a+"(\\s|$)");if(b.test(c.className)){c.className=c.className.replace(b,"")}else{c.className+=" "+a}};dwr.util.cloneNode=function(b,a){b=dwr.util._getElementById(b,"cloneNode()");if(b==null){return null}if(a==null){a={}}var c=b.cloneNode(true);if(a.idPrefix||a.idSuffix){dwr.util._updateIds(c,a)}else{dwr.util._removeIds(c)}b.parentNode.insertBefore(c,b);return c};dwr.util._updateIds=function(d,a){if(a==null){a={}}if(d.id){d.setAttribute("id",(a.idPrefix||"")+d.id+(a.idSuffix||""))}var c=d.childNodes;for(var b=0;b<c.length;b++){var e=c.item(b);if(e.nodeType==1){dwr.util._updateIds(e,a)}}};dwr.util._removeIds=function(c){if(c.id){c.removeAttribute("id")}var b=c.childNodes;for(var a=0;a<b.length;a++){var d=b.item(a);if(d.nodeType==1){dwr.util._removeIds(d)}}};dwr.util.cloneNodeForValues=function(a,c,b){a=dwr.util._getElementById(a,"cloneNodeForValues()");if(a==null){return null}if(b==null){b={}}var d;if(b.idPrefix!=null){d=b.idPrefix}else{d=a.id||""}return dwr.util._cloneNodeForValuesRecursive(a,c,d,b)};dwr.util._cloneNodeForValuesRecursive=function(a,c,e,j){if(dwr.util._isArray(c)){var g=[];for(var d=0;d<c.length;d++){var h=c[d];var f=dwr.util._cloneNodeForValuesRecursive(a,h,e+"["+d+"]",j);g.push(f)}return g}else{if(dwr.util._isObject(c)&&!dwr.util._isArray(c)){var f=a.cloneNode(true);if(j.updateCloneStyle&&f.style){for(var b in j.updateCloneStyle){f.style[b]=j.updateCloneStyle[b]}}dwr.util._replaceIds(f,a.id,e);a.parentNode.insertBefore(f,a);dwr.util._cloneSubArrays(c,e,j);return f}}return null};dwr.util._replaceIds=function(f,h,c){if(f.id){var b=null;if(f.id==h){b=c}else{if(f.id.length>h.length){if(f.id.substr(0,h.length)==h){var a=f.id.charAt(h.length);if(a=="."||a=="["){b=c+f.id.substr(h.length)}}}}if(b){f.setAttribute("id",b)}else{f.removeAttribute("id")}}var e=f.childNodes;for(var d=0;d<e.length;d++){var g=e.item(d);if(g.nodeType==1){dwr.util._replaceIds(g,h,c)}}};dwr.util._cloneSubArrays=function(c,f,a){for(prop in c){var b=c[prop];if(dwr.util._isArray(b)){if(b.length>0&&dwr.util._isObject(b[0])){var e=f+"."+prop;var d=dwr.util.byId(e);if(d!=null){dwr.util._cloneNodeForValuesRecursive(d,b,e,a)}}}else{if(dwr.util._isObject(b)){dwr.util._cloneSubArrays(b,f+"."+prop,a)}}}};dwr.util._getElementById=function(b,a){var c=b;b=dwr.util.byId(b);if(b==null){dwr.util._debug(a+" can't find an element with id: "+c+".")}return b};dwr.util._isHTMLElement=function(c,e){if(c==null||typeof c!="object"||c.nodeName==null){return false}if(e!=null){var d=c.nodeName.toLowerCase();if(typeof e=="string"){return d==e.toLowerCase()}if(dwr.util._isArray(e)){var a=false;for(var b=0;b<e.length&&!a;b++){if(d==e[b].toLowerCase()){a=true}}return a}dwr.util._debug("dwr.util._isHTMLElement was passed test node name that is neither a string or array of strings");return false}return true};dwr.util._detailedTypeOf=function(a){var b=typeof a;if(b=="object"){b=Object.prototype.toString.apply(a);b=b.substring(8,b.length-1)}return b};dwr.util._isObject=function(a){return(a&&typeof a=="object")};dwr.util._isArray=function(a){return(a&&a.join)};dwr.util._isDate=function(a){return(a&&a.toUTCString)?true:false};dwr.util._importNode=function(f,e,b){var d;if(e.nodeType==1){d=f.createElement(e.nodeName);for(var c=0;c<e.attributes.length;c++){var a=e.attributes[c];if(a.nodeValue!=null&&a.nodeValue!=""){d.setAttribute(a.name,a.nodeValue)}}if(typeof e.style!="undefined"){d.style.cssText=e.style.cssText}}else{if(e.nodeType==3){d=f.createTextNode(e.nodeValue)}}if(b&&e.hasChildNodes()){for(c=0;c<e.childNodes.length;c++){d.appendChild(dwr.util._importNode(f,e.childNodes[c],true))}}return d};dwr.util._debug=function(f,d){var a=false;try{if(window.console){if(d&&window.console.trace){window.console.trace()}window.console.log(f);a=true}else{if(window.opera&&window.opera.postError){window.opera.postError(f);a=true}}}catch(c){}if(!a){var b=document.getElementById("dwr-debug");if(b){var e=f+"<br/>"+b.innerHTML;if(e.length>2048){e=e.substring(0,2048)}b.innerHTML=e}}};
